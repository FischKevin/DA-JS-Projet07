import{updateListElement as e}from"./handleDropDown.min.js";import{updateRecipeSection as t}from"./searchMain.min.js";import{searchByTags as d}from"./searchTag.min.js";import{recipes as a}from"./recipes.min.js";let addedTags=new Set,selectedTags={ingredient:[],appliance:[],ustensil:[]};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".dropdownContent ul").forEach(e=>{e.addEventListener("click",e=>{let t=e.target,a=t.dataset.type;"LI"!==t.tagName||t.classList.contains("selected")||addTag(t.textContent,a),d()})})});export function addTag(e,t){if(!t||!selectedTags[t]||addedTags.has(e))return;let d=document.querySelector(".addedTags"),a=document.createElement("div");a.className="tag",a.textContent=e,addedTags.add(e),a.dataset.type=t,a.addEventListener("click",()=>{removeTag(a,e,t)}),d.appendChild(a),selectedTags[t].push(e.toLowerCase());let s=new CustomEvent("tagAdded",{detail:{content:e,type:t}});document.dispatchEvent(s)}function removeTag(s,n,r){s.remove(),addedTags.delete(n);let o=selectedTags[r].indexOf(n.toLowerCase());o>-1&&selectedTags[r].splice(o,1),e(),t(a),d()}function setupDropdownFilter(e,t){let d=document.getElementById(e),a=document.getElementById(t);d.addEventListener("input",()=>{let e=d.value.trim().toLowerCase();Array.from(a.children).forEach(t=>{let d=t.textContent.trim().toLowerCase(),a=d.includes(e);t.style.display=a?"":"none"})})}document.addEventListener("DOMContentLoaded",()=>{setupDropdownFilter("dropdownSearchIngredients","ingredientsList"),setupDropdownFilter("dropdownSearchUstensiles","ustensilesList"),setupDropdownFilter("dropdownSearchAppareils","appareilsList")});